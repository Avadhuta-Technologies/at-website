---
import Layout from '../../layouts/Layout.astro';
import { catalogUtils } from '../../content/catalog/_index.js';
import PackHeroSection from '../../components/packs/PackHeroSection.astro';
import PackIncludedSection from '../../components/packs/PackIncludedSection.astro';
import PackAddOnsSection from '../../components/packs/PackAddOnsSection.astro';
import PackIdealForSection from '../../components/packs/PackIdealForSection.astro';
import PackWhyItWorksSection from '../../components/packs/PackWhyItWorksSection.astro';
import PackTestimonialsSection from '../../components/packs/PackTestimonialsSection.astro';
import PackPricingSection from '../../components/packs/PackPricingSection.astro';
import PodRequiredModal from '../../components/shared/PodRequiredModal.astro';

export async function getStaticPaths() {
  const { packs } = catalogUtils.getAllProducts();
  return packs.map((pack) => ({
    params: { slug: pack.id },
    props: { pack },
  }));
}

const { pack } = Astro.props;
---

<Layout title={`${pack.title} - Pack Details`} description={pack.description}>
  <!-- Add class to body for dark header -->
  <script>
    document.body.classList.add('dark-header-page');
  </script>
  
  <!-- Hero Section -->
  <PackHeroSection pack={pack} />

  <!-- What's Included Section -->
  <PackIncludedSection deliverables={pack.deliverables} />

  <!-- Add-Ons Section -->
  <PackAddOnsSection addOns={pack.addOns} />

  <!-- Who It's For Section -->
  <PackIdealForSection idealFor={pack.idealFor} />

  <!-- Why This Pack Works Section -->
  <PackWhyItWorksSection whyItWorks={pack.whyItWorks} />

  <!-- Testimonials Section -->
  <PackTestimonialsSection testimonials={pack.testimonials} />

  <!-- Pricing & CTA Section -->
  <PackPricingSection pack={pack} />
  
  <!-- Pod Required Modal -->
  <PodRequiredModal />
</Layout> 