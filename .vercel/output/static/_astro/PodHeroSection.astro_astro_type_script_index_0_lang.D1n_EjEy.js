const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/summaryShared.-iQDg7sh.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./preload-helper.BlTxHScW.js";let n="";function m(){const e=document.querySelector(".pod-hero-cta-btn");return e&&e.getAttribute("data-item-id")||""}document.addEventListener("DOMContentLoaded",function(){console.log("ðŸ”µ [PodHeroSection] DOMContentLoaded - updating CTA button"),n=m(),console.log("ðŸ”µ [PodHeroSection] Current pod ID from button:",n);try{const e=JSON.parse(localStorage.getItem("novapod-cart")||"[]"),t=e.find(c=>c.type==="pod");console.log("ðŸ”µ [PodHeroSection] Immediate localStorage check - cart:",e),console.log("ðŸ”µ [PodHeroSection] Immediate localStorage check - selectedPod:",t),console.log("ðŸ”µ [PodHeroSection] Current pod ID:",n),t&&t.id===n?console.log("ðŸ”µ [PodHeroSection] Pod is in cart - should show Remove Pod"):console.log("ðŸ”µ [PodHeroSection] Pod is not in cart - should show Reserve Pod")}catch(e){console.error("ðŸ”µ [PodHeroSection] Error in immediate localStorage check:",e)}setTimeout(()=>{i()},100)});document.addEventListener("cart-updated",function(){console.log("ðŸ”µ [PodHeroSection] Cart updated event received - updating CTA button"),n=m(),setTimeout(()=>{i()},100)});window.addEventListener("cart-updated",function(){i()});async function i(){try{console.log("ðŸ”µ [PodHeroSection] updatePodHeroCTA called");const{SummaryShared:e}=await P(async()=>{const{SummaryShared:d}=await import("./summaryShared.-iQDg7sh.js").then(s=>s.s);return{SummaryShared:d}},__vite__mapDeps([0,1])),c=await new e().getCart(),a=c.find(d=>d.type==="pod");console.log("ðŸ”µ [PodHeroSection] Current cart:",c),console.log("ðŸ”µ [PodHeroSection] Selected pod:",a),console.log("ðŸ”µ [PodHeroSection] Current pod ID:",n);let o=document.querySelector(".pod-hero-cta-btn");console.log("ðŸ”µ [PodHeroSection] Found button with .pod-hero-cta-btn:",o),n=m(),o||(o=document.querySelector(`[data-add-to-cart][data-item-id="${n}"]`),console.log("ðŸ”µ [PodHeroSection] Found button with fallback selector:",o)),o||(o=document.querySelector(`#pod-hero-cta-${n}`),console.log("ðŸ”µ [PodHeroSection] Found button with ID selector:",o));const r=o?.querySelector(".cta-text");console.log("ðŸ”µ [PodHeroSection] Found ctaText:",r),o&&r?(console.log("ðŸ”µ [PodHeroSection] Button and ctaText found - updating..."),console.log("ðŸ”µ [PodHeroSection] Current button text:",r.textContent),console.log("ðŸ”µ [PodHeroSection] Current button classes:",o.className),a&&a.id===n?(console.log('ðŸ”µ [PodHeroSection] Pod is in cart - updating to "Remove Pod"'),o.classList.remove("bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","hover:from-mint-600","hover:to-cerulean-600","hover:scale-105","hover:shadow-md","shadow-sm"),o.classList.add("text-graphite-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50","!text-graphite-600"),console.log("ðŸ”µ [PodHeroSection] Updated button classes:",o.className),o.setAttribute("data-action","remove"),console.log("ðŸ”µ [PodHeroSection] Updated data-action to: remove"),r.textContent="Remove Pod",console.log("ðŸ”µ [PodHeroSection] Updated button text to: Remove Pod")):(console.log('ðŸ”µ [PodHeroSection] Pod is not in cart - updating to "Reserve Pod"'),o.classList.remove("text-graphite-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50","!text-graphite-600"),o.classList.add("bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","hover:from-mint-600","hover:to-cerulean-600","hover:scale-105","hover:shadow-md","shadow-sm"),console.log("ðŸ”µ [PodHeroSection] Updated button classes:",o.className),o.setAttribute("data-action","add"),console.log("ðŸ”µ [PodHeroSection] Updated data-action to: add"),r.textContent="Reserve Pod",console.log("ðŸ”µ [PodHeroSection] Updated button text to: Reserve Pod"))):console.log("ðŸ”µ [PodHeroSection] Button or ctaText not found")}catch(e){console.error("ðŸ”µ [PodHeroSection] Error updating pod hero CTA:",e)}}document.addEventListener("click",async function(e){if(console.log("ðŸ”µ [PodHeroSection] Click event detected on:",e.target),e.target&&e.target.closest(".pod-hero-cta-btn")){e.preventDefault(),e.stopPropagation();const t=e.target.closest(".pod-hero-cta-btn");if(t){const c=t.getAttribute("data-action")||"add",a=t.getAttribute("data-item-id"),o=t.querySelector(".cta-text")?.textContent;console.log("ðŸ”µ [PodHeroSection] CTA button clicked:",{action:c,podId:a,buttonText:o,buttonClasses:t.className});try{const{SummaryShared:r}=await P(async()=>{const{SummaryShared:s}=await import("./summaryShared.-iQDg7sh.js").then(l=>l.s);return{SummaryShared:s}},__vite__mapDeps([0,1])),d=new r;if(c==="add")console.log("ðŸ”µ [PodHeroSection] Attempting to add pod to cart..."),!!await d.selectPodWithConfirmation(a)?(console.log("ðŸ”µ [PodHeroSection] Pod added to cart successfully"),window.location.href="/summary?step=1"):console.log("ðŸ”µ [PodHeroSection] Failed to add pod to cart");else if(c==="remove"){console.log("ðŸ”µ [PodHeroSection] Attempting to remove pod from cart...");const g=(await d.getCart()).find(u=>u.type==="pod")?.name||"Current Pod";window.removeItemConfirmationModal?window.removeItemConfirmationModal.show(g,"pod",async()=>{await d.removePod()?(console.log("ðŸ”µ [PodHeroSection] Pod removed from cart successfully"),i()):console.log("ðŸ”µ [PodHeroSection] Failed to remove pod from cart")},()=>{console.log("ðŸ”µ [PodHeroSection] Pod removal cancelled")}):await d.removePod()?(console.log("ðŸ”µ [PodHeroSection] Pod removed from cart successfully"),i()):console.log("ðŸ”µ [PodHeroSection] Failed to remove pod from cart")}}catch(r){console.error("ðŸ”µ [PodHeroSection] Error handling CTA button:",r)}}}});
