const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/summaryShared.-iQDg7sh.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as b}from"./preload-helper.BlTxHScW.js";let c="";function v(){const e=document.querySelector(".pod-pricing-cta-btn");return e&&e.getAttribute("data-item-id")||""}document.addEventListener("DOMContentLoaded",function(){console.log("ðŸ”µ [PodPricingCard] DOMContentLoaded - updating CTA button"),c=v(),console.log("ðŸ”µ [PodPricingCard] Current pod ID from button:",c);try{const e=JSON.parse(localStorage.getItem("novapod-cart")||"[]"),g=e.find(o=>o.type==="pod");console.log("ðŸ”µ [PodPricingCard] Immediate localStorage check - cart:",e),console.log("ðŸ”µ [PodPricingCard] Immediate localStorage check - selectedPod:",g),console.log("ðŸ”µ [PodPricingCard] Current pod ID:",c),g&&g.id===c?console.log("ðŸ”µ [PodPricingCard] Pod is in cart - should show Remove Pod"):console.log("ðŸ”µ [PodPricingCard] Pod is not in cart - should show Reserve Pod")}catch(e){console.error("ðŸ”µ [PodPricingCard] Error in immediate localStorage check:",e)}setTimeout(()=>{C()},100)});document.addEventListener("cart-updated",function(){console.log("ðŸ”µ [PodPricingCard] Cart updated event received - updating CTA button"),c=v(),setTimeout(()=>{C()},100)});async function C(){try{console.log("ðŸ”µ [PodPricingCard] updatePodPricingCTA called");const{SummaryShared:e}=await b(async()=>{const{SummaryShared:n}=await import("./summaryShared.-iQDg7sh.js").then(r=>r.s);return{SummaryShared:n}},__vite__mapDeps([0,1])),o=await new e().getCart(),i=o.find(n=>n.type==="pod");console.log("ðŸ”µ [PodPricingCard] Current cart:",o),console.log("ðŸ”µ [PodPricingCard] Selected pod:",i),console.log("ðŸ”µ [PodPricingCard] Current pod ID:",c);let t=document.querySelector(".pod-pricing-cta-btn");console.log("ðŸ”µ [PodPricingCard] Found button with .pod-pricing-cta-btn:",t),c=v(),t||(t=document.querySelector(`[data-add-to-cart][data-item-id="${c}"]`),console.log("ðŸ”µ [PodPricingCard] Found button with fallback selector:",t)),t||(t=document.querySelector(`#pod-pricing-cta-${c}`),console.log("ðŸ”µ [PodPricingCard] Found button with ID selector:",t));const a=t?.querySelector(".cta-text");if(console.log("ðŸ”µ [PodPricingCard] Found ctaText:",a),t&&a){if(console.log("ðŸ”µ [PodPricingCard] Button and ctaText found - updating..."),console.log("ðŸ”µ [PodPricingCard] Current button text:",a.textContent),console.log("ðŸ”µ [PodPricingCard] Current button classes:",t.className),i&&i.id===c){console.log('ðŸ”µ [PodPricingCard] Pod is in cart - updating to "Remove Pod"'),t.classList.remove("from-mint-500","to-cerulean-500","hover:from-mint-600","hover:to-cerulean-600"),t.classList.add("text-gray-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50","!text-gray-600"),console.log("ðŸ”µ [PodPricingCard] Updated button classes:",t.className),t.setAttribute("data-action","remove"),console.log("ðŸ”µ [PodPricingCard] Updated data-action to: remove"),a.textContent="Remove Pod",console.log("ðŸ”µ [PodPricingCard] Updated button text to: Remove Pod");const n=t.querySelector("svg");n&&(n.innerHTML='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>',console.log("ðŸ”µ [PodPricingCard] Updated icon to trash icon"))}else{console.log('ðŸ”µ [PodPricingCard] Pod is not in cart - updating to "Reserve Pod"'),t.classList.remove("text-gray-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50","!text-gray-600"),t.classList.add("from-mint-500","to-cerulean-500","hover:from-mint-600","hover:to-cerulean-600"),console.log("ðŸ”µ [PodPricingCard] Updated button classes:",t.className),t.setAttribute("data-action","add"),console.log("ðŸ”µ [PodPricingCard] Updated data-action to: add"),a.textContent="Reserve Pod",console.log("ðŸ”µ [PodPricingCard] Updated button text to: Reserve Pod");const n=t.querySelector("svg");n&&(n.innerHTML='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>',console.log("ðŸ”µ [PodPricingCard] Updated icon to arrow icon"))}console.log("ðŸ”µ [PodPricingCard] Final button text:",a.textContent),console.log("ðŸ”µ [PodPricingCard] Final button classes:",t.className)}else console.log("ðŸ”µ [PodPricingCard] Button or ctaText not found!"),console.log("ðŸ”µ [PodPricingCard] Button:",t),console.log("ðŸ”µ [PodPricingCard] ctaText:",a)}catch(e){console.error("ðŸ”µ [PodPricingCard] Error updating CTA button:",e)}}document.addEventListener("click",async function(e){console.log("ðŸ”µ [PodPricingCard] Click event detected on:",e.target);const o=e.target.closest(".pod-pricing-cta-btn");if(o){if(o.disabled){console.log("ðŸ”µ [PodPricingCard] Button already processing, ignoring duplicate click");return}e.preventDefault(),e.stopPropagation();const i=o.getAttribute("data-action")||"add",t=o.getAttribute("data-item-id"),a=o.querySelector(".cta-text")?.textContent;console.log("ðŸ”µ [PodPricingCard] CTA button clicked:",{action:i,podId:t,buttonText:a,buttonClasses:o.className}),o.disabled=!0;const n=o.querySelector(".cta-text")?.textContent,r=o.querySelector("svg")?.innerHTML,d=o.querySelector(".cta-text");d&&(d.textContent="Processing...");try{const{SummaryShared:m}=await b(async()=>{const{SummaryShared:p}=await import("./summaryShared.-iQDg7sh.js").then(f=>f.s);return{SummaryShared:p}},__vite__mapDeps([0,1])),s=new m;if(i==="add")if(console.log("ðŸ”µ [PodPricingCard] Attempting to add pod to cart..."),!!await s.selectPodWithConfirmation(t))console.log("ðŸ”µ [PodPricingCard] Pod added to cart successfully"),window.location.href="/summary?step=1";else{console.log("ðŸ”µ [PodPricingCard] Failed to add pod to cart"),o.disabled=!1,d&&(d.textContent=n);const u=o.querySelector("svg");u&&r&&(u.innerHTML=r)}else if(i==="remove"){console.log("ðŸ”µ [PodPricingCard] Attempting to remove pod from cart...");const u=(await s.getCart()).find(l=>l.type==="pod")?.name||"Current Pod";if(window.removeItemConfirmationModal)window.removeItemConfirmationModal.show(u,"pod",async()=>{if(await s.removePod())console.log("ðŸ”µ [PodPricingCard] Pod removed from cart successfully"),C();else{console.log("ðŸ”µ [PodPricingCard] Failed to remove pod from cart"),o.disabled=!1,d&&(d.textContent=n);const P=o.querySelector("svg");P&&r&&(P.innerHTML=r)}},()=>{console.log("ðŸ”µ [PodPricingCard] Pod removal cancelled"),o.disabled=!1,d&&(d.textContent=n);const l=o.querySelector("svg");l&&r&&(l.innerHTML=r)});else if(await s.removePod())console.log("ðŸ”µ [PodPricingCard] Pod removed from cart successfully"),C();else{console.log("ðŸ”µ [PodPricingCard] Failed to remove pod from cart"),o.disabled=!1,d&&(d.textContent=n);const P=o.querySelector("svg");P&&r&&(P.innerHTML=r)}}}catch(m){console.error("ðŸ”µ [PodPricingCard] Error handling CTA button:",m),o.disabled=!1,d&&(d.textContent=n);const s=o.querySelector("svg");s&&r&&(s.innerHTML=r)}}});
