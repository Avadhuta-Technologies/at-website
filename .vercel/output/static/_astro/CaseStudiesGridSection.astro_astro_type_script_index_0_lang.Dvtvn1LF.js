document.addEventListener("DOMContentLoaded",()=>{console.log("🔧 [CaseStudiesGrid] DOM loaded, initializing tabs...");const m=document.querySelectorAll(".tab-button");console.log("🔍 [CaseStudiesGrid] Found tab buttons:",m.length),m.forEach((e,r)=>{const s=e.getAttribute("data-tab"),t=e.textContent?.trim();console.log(`  ${r+1}. data-tab="${s}", text="${t}"`)});const c=document.querySelector('[data-tab="mobile-apps-utility-delivery"]');console.log("🔍 [CaseStudiesGrid] Mobile Utility tab found:",!!c),c&&console.log("🔍 [CaseStudiesGrid] Mobile Utility tab text:",c.textContent?.trim());const l=new URLSearchParams(window.location.search).get("industry");console.log("🔍 [CaseStudiesGrid] Current URL industry param:",l);const d=document.querySelectorAll(".tab-button"),b=document.querySelectorAll(".tab-content"),y=document.querySelectorAll(".case-study-card");if(l){console.log("🔧 [CaseStudiesGrid] Auto-activating tab for industry:",l);let e=decodeURIComponent(l).replace(/\+/g," ");e.includes("&")&&!e.includes("=")&&console.log("🔧 [CaseStudiesGrid] Detected ampersand in industry name:",e),console.log("🔧 [CaseStudiesGrid] Decoded param:",e);const r=Array.from(document.querySelectorAll(".tab-button")).map(t=>t.textContent?.trim()).filter(t=>t&&t!=="All");console.log("🔧 [CaseStudiesGrid] Available industries:",r);let s=r.find(t=>{const a=t.toLowerCase().trim(),n=e.toLowerCase().trim();return a===n});if(s||(console.log("🔧 [CaseStudiesGrid] Trying slug matching..."),s=r.find(t=>{const a=t.toLowerCase().replace(/\s*\/\s*/g,"-").replace(/\s*\(\s*/g,"-").replace(/\s*\)\s*/g,"").replace(/\s*&\s*/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),n=e.toLowerCase().trim(),o=a===n;return console.log(`   Checking "${t}" → slug: "${a}" vs param: "${n}" → ${o}`),o})),console.log("🔧 [CaseStudiesGrid] Matched industry:",s),s){const t=s.toLowerCase().replace(/\s*\/\s*/g,"-").replace(/\s*\(\s*/g,"-").replace(/\s*\)\s*/g,"").replace(/\s*&\s*/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");console.log("🔧 [CaseStudiesGrid] Target tab:",t);const a=document.querySelector(`[data-tab="${t}"]`);a?(console.log("🔧 [CaseStudiesGrid] Activating tab button:",a.textContent?.trim()),d.forEach(n=>{n.classList.remove("active","bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","shadow-sm"),n.classList.add("glass","border-graphite-300/50","text-graphite-700")}),a.classList.add("active","bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","shadow-sm"),a.classList.remove("glass","border-graphite-300/50","text-graphite-700"),b.forEach(n=>{n.classList.add("hidden"),n.getAttribute("data-tab")===t&&(n.classList.remove("hidden"),console.log("🔧 [CaseStudiesGrid] Showing content for tab:",t))})):console.log("❌ [CaseStudiesGrid] Target button not found for tab:",t)}else console.log("❌ [CaseStudiesGrid] No matching industry found for:",e)}else console.log('🔧 [CaseStudiesGrid] No industry parameter, showing "All" tab');const C={threshold:.1,rootMargin:"0px 0px -50px 0px"},p=new IntersectionObserver(e=>{e.forEach((r,s)=>{r.isIntersecting&&setTimeout(()=>{r.target.classList.add("animate")},s*100)})},C);y.forEach(e=>{p.observe(e)});function S(e){const r=new URL(window.location.href);if(e==="all")r.searchParams.delete("industry");else{const t=Array.from(document.querySelectorAll(".tab-button")).map(a=>a.textContent?.trim()).filter(a=>a&&a!=="All").find(a=>a?a.toLowerCase().replace(/\s*\/\s*/g,"-").replace(/\s*\(\s*/g,"-").replace(/\s*\)\s*/g,"").replace(/\s*&\s*/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")===e:!1);t&&r.searchParams.set("industry",t)}window.history.replaceState({},"",r)}d.forEach(e=>{e.addEventListener("click",()=>{const r=e.getAttribute("data-tab");d.forEach(s=>{s.classList.remove("active","bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","shadow-sm"),s.classList.add("glass","border-graphite-300/50","text-graphite-700")}),e.classList.add("active","bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","shadow-sm"),e.classList.remove("glass","border-graphite-300/50","text-graphite-700"),b.forEach(s=>{s.classList.add("hidden"),s.getAttribute("data-tab")===r&&(s.classList.remove("hidden"),s.querySelectorAll(".case-study-card").forEach(a=>{p.observe(a)}))}),r&&S(r)})}),window.addEventListener("popstate",()=>{const r=new URLSearchParams(window.location.search).get("industry");if(!r){const o=document.querySelector('[data-tab="all"]');o&&o.click();return}const s=decodeURIComponent(r).replace(/\+/g," "),t=Array.from(document.querySelectorAll(".tab-button")).map(o=>o.textContent?.trim()).filter(o=>o!=null&&o!=="All");function a(o,i){if(!o)return null;const u=o.toLowerCase().trim(),f=i.find(g=>g.toLowerCase()===u);return f||i.find(g=>{const h=g.toLowerCase();return h.includes(u)||u.includes(h)})||null}const n=a(s,t);if(n){const o=n.toLowerCase().replace(/\s*\/\s*/g,"-").replace(/\s*\(\s*/g,"-").replace(/\s*\)\s*/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),i=document.querySelector(`[data-tab="${o}"]`);i&&i.click()}else{const o=document.querySelector('[data-tab="all"]');o&&o.click()}})});
