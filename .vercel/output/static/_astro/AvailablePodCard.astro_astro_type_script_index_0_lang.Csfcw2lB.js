const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/summaryShared.-iQDg7sh.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./preload-helper.BlTxHScW.js";document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",async function(o){if(o.target&&o.target.closest(".pod-cta-btn")){o.preventDefault(),o.stopPropagation();const t=o.target.closest(".pod-cta-btn");if(t){const e=t.getAttribute("data-pod-id"),n=t.getAttribute("data-action")||"add";console.log("ðŸ”µ [AvailablePodCard] Reserve Pod clicked for:",e,"action:",n),console.log("ðŸ”µ [AvailablePodCard] Button data-action attribute:",n),console.log("ðŸ”µ [AvailablePodCard] Button classes:",t.className);try{const{SummaryShared:d}=await u(async()=>{const{SummaryShared:l}=await import("./summaryShared.-iQDg7sh.js").then(s=>s.s);return{SummaryShared:l}},__vite__mapDeps([0,1])),r=new d;if(n==="add")!!await r.selectPodWithConfirmation(e)&&(console.log("ðŸ”µ [AvailablePodCard] Pod added to cart successfully"),window.location.href="/summary?step=1");else if(n==="remove"){const s=(await r.getCart()).find(c=>c.type==="pod"),i=s?.title||s?.name||"Current Pod";window.removeItemConfirmationModal?window.removeItemConfirmationModal.show(i,"pod",async()=>{await r.removePod()&&console.log("ðŸ”µ [AvailablePodCard] Pod removed from cart successfully")},()=>{console.log("ðŸ”µ [AvailablePodCard] Pod removal cancelled")}):await r.removePod()&&console.log("ðŸ”µ [AvailablePodCard] Pod removed from cart successfully")}}catch(d){console.error("ðŸ”µ [AvailablePodCard] Error handling Reserve Pod button:",d)}}}if(o.target&&o.target.closest(".view-details-btn")){o.preventDefault(),o.stopPropagation();const t=o.target.closest(".view-details-btn");if(t){const e=t.getAttribute("data-pod-slug");e&&(console.log("ðŸ”µ [AvailablePodCard] View Details clicked for pod:",e),window.location.href=`/pods/${e}`)}}const a=o.target&&o.target.closest(".pod-card");if(a&&!(o.target&&o.target.closest("button, a, [data-add-to-cart]"))){const e=a.getAttribute("data-pod-slug");e&&(window.location.href=`/pods/${e}`)}})});console.log("ðŸ”µ [AvailablePodCard] Component loaded for pod:","{{pod.name}}");console.log("ðŸ”µ [AvailablePodCard] Generated podId:","{{podId}}");if(typeof window<"u")try{const a=JSON.parse(localStorage.getItem("novapod-cart")||"[]").find(t=>t.type==="pod");console.log("ðŸ”µ [AvailablePodCard] Initial cart check for podId:","{{podId}}"),console.log("ðŸ”µ [AvailablePodCard] Selected pod in cart:",a),a&&a.id==="{{podId}}"&&(console.log('ðŸ”µ [AvailablePodCard] This pod is already in cart - setting initial state to "Remove Pod"'),setTimeout(()=>{const t=document.querySelector('[data-pod-id="{{podId}}"]'),e=t?.querySelector(".cta-text");t&&e&&(t.classList.remove("bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","hover:from-mint-600","hover:to-cerulean-600"),t.classList.add("text-graphite-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50"),t.setAttribute("data-action","remove"),e.textContent="Remove Pod",console.log('ðŸ”µ [AvailablePodCard] Initial button state set to "Remove Pod"'))},100))}catch(o){console.error("ðŸ”µ [AvailablePodCard] Error checking initial cart state:",o)}if(typeof window<"u"){let o=function(){try{const a=JSON.parse(localStorage.getItem("novapod-cart")||"[]"),t=a.find(n=>n.type==="pod");console.log("ðŸ”µ [AvailablePodCard] Current cart:",a),console.log("ðŸ”µ [AvailablePodCard] Selected pod:",t);const e=document.querySelectorAll(".pod-cta-btn");console.log("ðŸ”µ [AvailablePodCard] Found pod buttons:",e.length),e.forEach(n=>{const d=n,r=d.getAttribute("data-pod-id"),l=d.querySelector(".cta-text");console.log("ðŸ”µ [AvailablePodCard] Checking button for podId:",r),console.log("ðŸ”µ [AvailablePodCard] Selected pod ID:",t?.id),t&&t.id===r?(console.log('ðŸ”µ [AvailablePodCard] Updating button to "Remove Pod" for:',r),d.classList.remove("bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","hover:from-mint-600","hover:to-cerulean-600"),d.classList.add("text-graphite-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50"),d.setAttribute("data-action","remove"),l&&(l.textContent="Remove Pod"),console.log('ðŸ”µ [AvailablePodCard] Button state updated to "remove" for podId:',r)):(console.log('ðŸ”µ [AvailablePodCard] Updating button to "Reserve Pod" for:',r),d.classList.remove("text-graphite-600","hover:text-red-500","bg-transparent","hover:bg-red-50/50"),d.classList.add("bg-gradient-to-r","from-mint-500","to-cerulean-500","text-white","hover:from-mint-600","hover:to-cerulean-600"),d.setAttribute("data-action","add"),l&&(l.textContent="Reserve Pod"),console.log('ðŸ”µ [AvailablePodCard] Button state updated to "add" for podId:',r))})}catch(a){console.error("ðŸ”µ [AvailablePodCard] Error updating pod CTA buttons:",a)}};window.addEventListener("cart-updated",a=>{console.log("ðŸ”µ [AvailablePodCard] Cart updated event received:",a.detail),o()}),document.addEventListener("DOMContentLoaded",()=>{o()})}
