import{v as a,b as r,s as i,d as n}from"./locationUtils.jdD-zG84.js";async function c(){try{console.log("🌍 [LocationDetector] Starting location detection...");const e=await a();window.userLocation=e;const t=document.createElement("div");t.id="location-info",t.style.display="none",t.setAttribute("data-country",e.country),t.setAttribute("data-currency",e.currency),t.setAttribute("data-timezone",e.timezone),t.setAttribute("data-timestamp",e.timestamp?.toString()||""),document.body.appendChild(t),console.log("🌍 [LocationDetector] User location detected:",e),console.log("🌍 [LocationDetector] Currency set to:",e.currency),window.dispatchEvent(new CustomEvent("location-detected",{detail:e})),document.querySelectorAll(".currency-display").length>0&&window.dispatchEvent(new CustomEvent("location-changed"))}catch(e){console.warn("🌍 [LocationDetector] Failed to detect location:",e);const t={country:"India",countryCode:"IN",currency:"INR",timezone:"Asia/Kolkata",timestamp:Date.now()};console.log("🌍 [LocationDetector] Using fallback location:",t),window.userLocation=t,i(t)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();window.addEventListener("location-refreshed",e=>{console.log("🌍 [LocationDetector] Location refreshed event received:",e.detail);const t=e.detail;window.userLocation=t;const o=document.getElementById("location-info");o&&(o.setAttribute("data-country",t.country),o.setAttribute("data-currency",t.currency),o.setAttribute("data-timezone",t.timezone),o.setAttribute("data-timestamp",t.timestamp?.toString()||"")),window.dispatchEvent(new CustomEvent("location-changed"))});window.locationUtils={detectUserLocation:n,setCustomLocation:i,forceRefreshLocation:r,validateAndRefreshLocation:a,getUserCurrency:async()=>(await n()).currency};
